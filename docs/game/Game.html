<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.9.1) on Fri Jan 29 17:25:54 EET 2021 -->
<title>Game</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2021-01-29">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
<script type="text/javascript" src="../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Game";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">game</a></div>
<h2 title="Class Game" class="title">Class Game</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>game.Game</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code>java.lang.Runnable</code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">Game</span>
extends java.lang.Object
implements java.lang.Runnable</pre>
<div class="block">This class represents an instance of a game. Each game runs on a separate thread, or more precisely the 5 minute game
 loop runs on the thread. This class keeps track of player moves and updates them on the respective game boards. It also keeps track
 of player points. This class mainly communicates with game client handle threads to inform clients about what's going on in the game and
 receive moves from them.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(tui.GameServerTUI,int)">Game</a></span>&#8203;(<a href="../tui/GameServerTUI.html" title="class in tui">GameServerTUI</a>&nbsp;view,
    int&nbsp;gameId)</code></th>
<td class="colLast">
<div class="block">Constructor that initialises this game's id, the terminal view, and sets the game started to false
 since the game only starts after both players have sent in their boards.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#endGame(boolean,java.lang.String,java.lang.String)">endGame</a></span>&#8203;(boolean&nbsp;timeFinished,
       java.lang.String&nbsp;quitPlayerName,
       java.lang.String&nbsp;winnerName)</code></th>
<td class="colLast">
<div class="block">Determines and informs who won and with what type of win: forfeit, time finished or winning by destroying all ships.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCurrentMove()">getCurrentMove</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for who has the current move in the game.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getGameId()">getGameId</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter to get the current game's id that is assigned to it by the server.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getGameStarted()">getGameStarted</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter to check whether the game has ended.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPlayer1Points()">getPlayer1Points</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for player 1 points</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPlayer2Points()">getPlayer2Points</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for player 2 points</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isValidPlayerName(java.lang.String)">isValidPlayerName</a></span>&#8203;(java.lang.String&nbsp;playerName)</code></th>
<td class="colLast">
<div class="block">Used by GameClientHandler thread to check whether the client has submitted a uniqe name.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#makeMove(int,int,boolean)">makeMove</a></span>&#8203;(int&nbsp;x,
        int&nbsp;y,
        boolean&nbsp;isLate)</code></th>
<td class="colLast">
<div class="block">Method that is called by GameClientHandler threads when their respective client has made a move
 or didn't make a move (late move).</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#run()">run</a></span>()</code></th>
<td class="colLast">
<div class="block">The game loop thread.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setBoard(java.lang.String,java.lang.String)">setBoard</a></span>&#8203;(java.lang.String&nbsp;encodedBoard,
        java.lang.String&nbsp;playerName)</code></th>
<td class="colLast">
<div class="block">Sets the respective player's game board.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setPlayer(server.GameClientHandler)">setPlayer</a></span>&#8203;(<a href="../server/GameClientHandler.html" title="class in server">GameClientHandler</a>&nbsp;player)</code></th>
<td class="colLast">
<div class="block">After a succesful handshake with the client whereby a uniqe name is gotten
 this method is called by the GameClientHandler thread to add the client to the game.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(tui.GameServerTUI,int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Game</h4>
<pre>public&nbsp;Game&#8203;(<a href="../tui/GameServerTUI.html" title="class in tui">GameServerTUI</a>&nbsp;view,
            int&nbsp;gameId)</pre>
<div class="block">Constructor that initialises this game's id, the terminal view, and sets the game started to false
 since the game only starts after both players have sent in their boards. Also initialises both player's points to 0.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>view</code> - The server's TUI.</dd>
<dd><code>gameId</code> - The id of this game given by the server.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="run()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;run()</pre>
<div class="block">The game loop thread. A while loop is set to end in 5 minutes or when the thread is interrupted because
 the game ended due to some other reason. The loop sleeps for one second every loop to  
 to be more efficient for the processor since it doesn't really
 have to be accurate to milliseconds. It is also decided in this thread which player goes first 
 and that's randomly found by the <a href="#decideWhoStart()"><code>decideWhoStart()</code></a> methods. Then both players are informed 
 about this with the game setup message.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>run</code>&nbsp;in interface&nbsp;<code>java.lang.Runnable</code></dd>
</dl>
</li>
</ul>
<a id="endGame(boolean,java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>endGame</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;endGame&#8203;(boolean&nbsp;timeFinished,
                    java.lang.String&nbsp;quitPlayerName,
                    java.lang.String&nbsp;winnerName)</pre>
<div class="block">Determines and informs who won and with what type of win: forfeit, time finished or winning by destroying all ships.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>timeFinished</code> - Indicates whether game is over because 5 minutes are up.</dd>
<dd><code>quitPlayerName</code> - Indicates whether the game is over because one of the players quit.</dd>
<dd><code>winnerName</code> - Indicates who won in the case that all ships are destroyed in the game for one of the players.</dd>
</dl>
</li>
</ul>
<a id="makeMove(int,int,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>makeMove</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;makeMove&#8203;(int&nbsp;x,
                     int&nbsp;y,
                     boolean&nbsp;isLate)</pre>
<div class="block">Method that is called by GameClientHandler threads when their respective client has made a move
 or didn't make a move (late move). This method then updates both player's board and then sends those updates to both players.
 It also changes the currentMove and previousMove variables as well as calls the makeMove() method for the respective client thread
 to start the move timer. And also it adds points for hit and sunk ships. This method is synchronized because it could potentially be called 
 by both client threads at once.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>x</code> - X coordinate of the move.</dd>
<dd><code>y</code> - Y coordinate of the move.</dd>
<dd><code>isLate</code> - Indicates whether the move was actually made by the client or the timer sent it due to late move.</dd>
</dl>
</li>
</ul>
<a id="setPlayer(server.GameClientHandler)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPlayer</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setPlayer&#8203;(<a href="../server/GameClientHandler.html" title="class in server">GameClientHandler</a>&nbsp;player)</pre>
<div class="block">After a succesful handshake with the client whereby a uniqe name is gotten
 this method is called by the GameClientHandler thread to add the client to the game. 
 Starting from player1. So player1 will always be the first connected, then player 2.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>player</code> - The player instance to be added to the game.</dd>
</dl>
</li>
</ul>
<a id="setBoard(java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setBoard</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setBoard&#8203;(java.lang.String&nbsp;encodedBoard,
                     java.lang.String&nbsp;playerName)</pre>
<div class="block">Sets the respective player's game board. Since in this class the players are just called player1
 and player2 to know which player is setting their board, the names are compared with the one provided when calling method
 to the names of the players in this game. This method is synchronized since it can be called by both player1 and player2 GameClientHandler
 threads at the same time. But that should not be possible as the last one to call this method starts up the game so the calls for setting board
 must be synchronized.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>board</code> - The board to be set.</dd>
<dd><code>playerName</code> - The name of the player for which the board is to be set.</dd>
</dl>
</li>
</ul>
<a id="isValidPlayerName(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isValidPlayerName</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isValidPlayerName&#8203;(java.lang.String&nbsp;playerName)</pre>
<div class="block">Used by GameClientHandler thread to check whether the client has submitted a uniqe name. 
 Since player1 is always connected first there is a check for player1 == null and the name, whatever it is, 
 has to be unique. Then when player2 connects the name provided by it is compared to player1 name by the second part.
 This method is synchronized because it could potentially be called by boht threads at once.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>playerName</code> - The name to be checked</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Whether the name can be used in this game.</dd>
</dl>
</li>
</ul>
<a id="getGameId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGameId</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getGameId()</pre>
<div class="block">Getter to get the current game's id that is assigned to it by the server.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The id of the game.</dd>
</dl>
</li>
</ul>
<a id="getGameStarted()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGameStarted</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;getGameStarted()</pre>
<div class="block">Getter to check whether the game has ended.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Whether the game has ended.</dd>
</dl>
</li>
</ul>
<a id="getCurrentMove()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentMove</h4>
<pre class="methodSignature">public&nbsp;java.lang.String&nbsp;getCurrentMove()</pre>
<div class="block">Getter for who has the current move in the game.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The player name who has the current move.</dd>
</dl>
</li>
</ul>
<a id="getPlayer1Points()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPlayer1Points</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getPlayer1Points()</pre>
<div class="block">Getter for player 1 points</div>
</li>
</ul>
<a id="getPlayer2Points()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getPlayer2Points</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getPlayer2Points()</pre>
<div class="block">Getter for player 2 points</div>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
